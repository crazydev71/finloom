/*
    *
    * Wijmo Library 5.20172.359
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","wijmo/wijmo"],function(n,t,i){"use strict";function cr(){return hr}function vt(n,t){return n==null?null:o(t)?rt(n.implementsInterface)&&n.implementsInterface(t)?n:null:n instanceof t?n:null}function li(n){return o(n)||v(n)||yt(n)||c(n)}function o(n){return typeof n=='string'}function lu(n){return n==null?!0:n.replace(/\s/g,'').length<1}function v(n){return typeof n=='number'}function lr(n){return v(n)&&n==Math.round(n)}function yt(n){return typeof n=='boolean'}function rt(n){return typeof n=='function'}function au(n){return typeof n=='undefined'}function c(n){return n instanceof Date&&!isNaN(n.getTime())}function ut(n){return n instanceof Array}function ri(n){return n!=null&&typeof n=='object'&&!c(n)&&!ut(n)}function ar(n){for(var t=n,i=0;document.getElementById(t)!=null;i++)t=n+i;return t}function vu(n){if(n instanceof b)return n;if(n.touches&&n.touches.length>0&&(n=n.touches[0]),v(n.pageX)&&v(n.pageY))return new b(n.pageX,n.pageY);throw'Mouse or touch event expected.';}function yu(n){return v(n)?y.Number:yt(n)?y.Boolean:c(n)?y.Date:o(n)?y.String:ut(n)?y.Array:y.Object}function vr(n,t,i){var u,r;if(n!=null){if(o(n))switch(t){case y.Number:return u=tt.parseFloat(n,i),isNaN(u)?n:u;case y.Date:return r=tt.parseDate(n,i),r||i||!n||(r=new Date(n)),r&&isFinite(r.getTime())?r:n;case y.Boolean:switch(n.toLowerCase()){case'true':return!0;case'false':return!1}return n}if(t==y.String)return tt.format(n,i)}return n}function ai(n,t,i){var u,r;return i?(r=n.toString(),u=r.indexOf('.'),u>-1&&(r=r.substr(0,u+1+t),n=parseFloat(r))):(r=n.toFixed(t),n=parseFloat(r)),n}function pu(n,t,i){var r,f,u,e;if(n=p(n),n.match(/\{.*"count".*:.*"when".*:.*\}/))try{r=JSON.parse(n);o(r.count)&&(f=t[r.count],u=r.when,v(f)&&ri(u)&&(e=u[f]||u.other,o(e)&&(n=e)))}catch(s){}return n.replace(/\{(.*?)(:(.*?))?\}/g,function(n,r,u,f){var e=n;return r&&r[0]!='{'&&t&&(e=t[r],f&&(e=tt.format(e,f)),i&&(e=i(t,r,f,e))),e==null?'':e})}function e(n,t,i){return n!=null&&(i!=null&&n>i&&(n=i),t!=null&&n<t&&(n=t)),n}function st(n,t){var i,u;if(t)for(i in t)i[0]!='_'&&(r(i in n,'Unknown property "'+i+'".'),u=t[i],n._copy&&n._copy(i,u)||(n[i]instanceof h&&rt(u)?n[i].addHandler(u):!ri(u)||u instanceof Element||!n[i]||i=='itemsSource'?n[i]=u:st(n[i],u)))}function r(n,t){if(!n)throw'** Assertion failed in Wijmo: '+t;}function wu(n,t){console.error('** WARNING: "'+n+'" has been deprecated; please use "'+t+'" instead.')}function p(n,t){return t===void 0&&(t=!0),r(t&&n==null||o(n),'String expected.'),n}function u(n,t,i){if(t===void 0&&(t=!1),i===void 0&&(i=!1),r(t&&n==null||v(n),'Number expected.'),i&&n&&n<0)throw'Positive number expected.';return n}function pt(n,t,i){if(t===void 0&&(t=!1),i===void 0&&(i=!1),r(t&&n==null||lr(n),'Integer expected.'),i&&n&&n<0)throw'Positive integer expected.';return n}function l(n,t){return t===void 0&&(t=!1),r(t&&n==null||yt(n),'Boolean expected.'),n}function yr(n,t){if(t===void 0&&(t=!1),o(n)){var i=vr(n,y.Date,'r');c(i)&&(n=i)}return r(t&&n==null||c(n),'Date expected.'),n}function w(n,t){return t===void 0&&(t=!0),r(t&&n==null||rt(n),'Function expected.'),n}function wt(n,t){return t===void 0&&(t=!0),r(t&&n==null||ut(n),'Array expected.'),n}function bt(n,t,i){return i===void 0&&(i=!1),n=vt(n,t),r(i||n!=null,t+' expected.'),n}function pr(n,t,i){if(i===void 0&&(i=!1),n==null&&i)return null;var u=t[n];return r(u!=null,'Invalid enum value.'),v(u)?u:n}function bu(n,t){if(t===void 0&&(t=!0),n==null&&t)return null;var i=vt(n,'ICollectionView');return i!=null?i:(ut(n)||r(!1,'Array or ICollectionView expected.'),new ti(n))}function ku(n){return n!=null&&n.items!=null&&n.items.length>0}function du(n){return n&&n.length?n[0].toUpperCase()+n.substr(1).replace(/([a-z])([A-Z])/g,'$1 $2'):''}function gu(n){return o(n)&&(n=n.replace(/[&<>"'\/]/g,function(n){return wr[n]})),n}function ui(n,t){if(n&&n.getAttribute){var i=new RegExp('(\\s|^)'+t+'(\\s|$)');return n&&i.test(n.getAttribute('class'))}return!1}function br(n,t){var u,i,f,e,r;if(n&&t&&n.setAttribute)for(u=t.split(' '),i=0;i<u.length;i++)f=u[i],ui(n,f)&&(e=new RegExp('((\\s|^)'+f+'(\\s|$))','g'),r=n.getAttribute('class'),r=r.replace(e,' ').replace(/ +/g,' ').trim(),n.setAttribute('class',r))}function kt(n,t){var u,i,r,f;if(n&&t&&n.setAttribute)for(u=t.split(' '),i=0;i<u.length;i++)r=u[i],ui(n,r)||(f=n.getAttribute('class'),n.setAttribute('class',f?f+' '+r:r))}function ht(n,t,i){i==null&&(i=!ui(n,t));i?kt(n,t):br(n,t)}function kr(n,t,i){i!=null?n.setAttribute(t,i.toString()):n.removeAttribute(t)}function vi(n,t,i){if(i===void 0&&(i=t),n=bt(n,HTMLInputElement),g(document.body,n)&&!n.disabled&&n.style.display!='none')try{n.setSelectionRange(u(t),u(i),si()?null:'backward');n.focus()}catch(r){}}function dt(){var n=document.activeElement,t;return n&&(t=n.shadowRoot,t&&t.activeElement&&(n=t.activeElement)),n}function nf(n,t){for(var o,e,i,s='input,select,textarea,button,a,div',h=n.querySelectorAll(s),r=[],u=0;u<h.length;u++)if(i=h[u],i.offsetHeight>0&&i.tabIndex>-1&&!i.disabled&&!nt(i,'[disabled],.wj-state-disabled')){if(si()&&!i.hasAttribute('tabindex')&&(o=f.getControl(nt(i,'.wj-flexgrid')),o&&o.keyActionTab==0))continue;(f.getControl(i)||!i.querySelector(s))&&r.push(i)}e=0;t&&(u=r.indexOf(dt()),u>-1&&(e=(u+t+r.length)%r.length));e<r.length&&(i=r[e],i.focus(),i instanceof HTMLInputElement&&i.select())}function ft(n){return n instanceof Element?n:o(n)?document.querySelector(n):n&&n.jquery?n[0]:null}function yi(n,t){var i=document.createElement('div'),r;return i.innerHTML=n,r=i.removeChild(i.firstChild),t instanceof HTMLElement?t.appendChild(r):r}function tf(n,t){n.textContent=t==null?'':t}function g(n,t){for(var i=t;i&&n;){if(i===n)return!0;i=i.parentNode||i.host}return!1}function nt(n,t){var i=n?n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector:null;if(i)for(;n;n=n.parentNode)if(n instanceof Element&&i.call(n,t))return n;return null}function rf(n,t){return nt(n,'.'+t)}function dr(n,t){var f=!t,r,i,u;for(ht(n,'wj-state-disabled',f),kr(n,'disabled',f?'true':null),r=n.querySelectorAll('input'),i=0;i<r.length;i++)u=r[i],t?u.removeAttribute('disabled'):u.setAttribute('disabled','true')}function uf(n){var t=n.getBoundingClientRect();return new ct(t.left+pageXOffset,t.top+pageYOffset,t.width,t.height)}function et(n,t){var u,f,r,i;if(n instanceof Array){for(u=0;u<n.length;u++)et(n[u],t);return}if(n&&n.style){f=n.style;for(r in t)i=t[r],typeof i=='number'&&r.match(/width|height|left|top|right|bottom|size|padding|margin'/i)&&(i=i+'px'),f[r]!=i&&(f[r]=i.toString())}}function pi(n,t,i){t===void 0&&(t=f._ANIM_DEF_DURATION);i===void 0&&(i=f._ANIM_DEF_STEP);n=w(n);t=u(t,!1,!0);i=u(i,!1,!0);var e=Date.now(),r=setInterval(function(){var i=Math.min(1,(Date.now()-e)/t);i=Math.sin(i*Math.PI/2);i*=i;requestAnimationFrame(function(){n(i)});i>=1&&clearInterval(r)},i);return r}function wi(n,t){var f,e,u,y,i,s,h;t||(t={});var a=t.method?p(t.method).toUpperCase():'GET',b=t.async!=null?l(t.async):!0,r=t.data;if(r!=null&&a=='GET'){f=[];for(e in r)u=r[e],c(u)&&(u=u.toJSON()),f.push(e+'='+u);f.length&&(y=n.indexOf('?')<0?'?':'&',n+=y+f.join('&'));r=null}if(i=new XMLHttpRequest,i.URL_DEBUG=n,s=!1,r==null||o(r)||(s=ri(r),r=JSON.stringify(r)),i.onload=function(){i.readyState==4&&(i.status<300?t.success&&w(t.success)(i):t.error&&w(t.error)(i),t.complete&&w(t.complete)(i))},i.onerror=function(){if(rt(t.error))t.error(i);else throw'HttpRequest Error: '+i.status+' '+i.statusText;},i.open(a,n,b,t.user,t.password),t.user&&t.password&&i.setRequestHeader('Authorization','Basic '+btoa(t.user+':'+t.password)),s&&i.setRequestHeader('Content-Type','application/json'),t.requestHeaders)for(h in t.requestHeaders)i.setRequestHeader(h,t.requestHeaders[h]);return v(t.timeout)&&(i.timeout=t.timeout),rt(t.beforeSend)&&t.beforeSend(i),i.send(r),i}function ff(){t.culture=window.wijmo.culture}function bi(n,t,i){var l=0,u=0,h=0,e=0,o=null,s=null,y=null,p=i?new ni(i):null,c,r,f;if(n=pr(n,a),n==a.CntAll)return t.length;for(c=0;c<t.length;c++){if(r=t[c],p&&(r=p.getValue(r)),n==a.First)return r;r!=null&&(l++,(o==null||r<o)&&(o=r),(s==null||r>s)&&(s=r),y=r,v(r)&&!isNaN(r)?(u++,h+=r,e+=r*r):yt(r)&&(u++,r==!0&&(h++,e++)))}f=u==0?0:h/u;switch(n){case a.Avg:return f;case a.Cnt:return l;case a.Max:return s;case a.Min:return o;case a.Rng:return s-o;case a.Sum:return h;case a.VarPop:return u<=1?0:e/u-f*f;case a.StdPop:return u<=1?0:Math.sqrt(e/u-f*f);case a.Var:return u<=1?0:(e/u-f*f)*u/(u-1);case a.Std:return u<=1?0:Math.sqrt((e/u-f*f)*u/(u-1));case a.Last:return y}throw'Invalid aggregate type.';}function uu(n,t,i,r,u){var a,c,h,ut,v,ft,y,nt,rt,st,p;if(t===void 0&&(t=null),i===void 0&&(i=!1),r===void 0&&(r=!1),u===void 0&&(u=!0),a=document.body,t instanceof HTMLElement){if(!g(document.body,t))return;for(c=t;c;c=c.parentElement)if(c.getAttribute('role')=='dialog'||getComputedStyle(c).position=='fixed'){a=c;break}}n.offsetHeight&&n.offsetWidth&&g(a,n)||a.lastChild!=n&&a.appendChild(n);t instanceof HTMLElement&&u&&(h=getComputedStyle(t),ut=new tr(h.backgroundColor),ut.a&&et(n,{color:h.color,backgroundColor:h.backgroundColor,fontFamily:h.fontFamily,fontSize:h.fontSize,fontWeight:h.fontWeight,fontStyle:h.fontStyle}));et(n,{position:'absolute',visibility:'hidden',display:''});f.refreshAll(n);var l=getComputedStyle(n),lt=parseFloat(l.marginTop)+parseFloat(l.marginBottom),at=parseFloat(l.marginLeft)+parseFloat(l.marginRight),s=new gt(n.offsetWidth+at,n.offsetHeight+lt),e=new b,o=null,w=document.documentElement.clientWidth,k=document.documentElement.clientHeight;if(t&&t.clientX!=null&&t.clientY!=null&&t.pageX!=null&&t.pageY!=null)t.clientX<=0&&t.clientY<=0&&t.target?o=t.target.getBoundingClientRect():(e.x=Math.max(0,t.pageX-pageXOffset),e.y=Math.max(0,t.pageY-pageYOffset));else if(t instanceof b)e=t;else if(t instanceof HTMLElement)o=t.getBoundingClientRect();else if(t&&t.top!=null&&t.left!=null)o=t;else if(t==null)e.x=Math.max(0,(w-s.width)/2),e.y=Math.max(0,Math.round((k-s.height)/2*.7));else throw'Invalid ref parameter.';if(v=parseFloat(l.minWidth),o){var tt=o.top,it=k-o.bottom,vt=getComputedStyle(n).direction=='rtl';e.x=vt?Math.max(0,o.right-s.width):Math.max(0,Math.min(o.left,w-s.width));e.y=i?tt>s.height||tt>it?Math.max(0,o.top-s.height):o.bottom:it>s.height||it>tt?o.bottom:Math.max(0,o.top-s.height);v=Math.max(v,o.width);si()&&(ft=n.offsetWidth-(n.clientWidth+parseInt(l.borderLeftWidth)+parseInt(l.borderRightWidth)),v-=ft)}else y=20,e.y+s.height>k-y&&(e.y=Math.max(0,k-y-s.height)),e.x+s.width>w-y&&(e.x=Math.max(0,w-y-s.width));var ot='fixed',d=new b(0,0),yt=document.documentElement.clientHeight/innerHeight;if(yt<1.005&&(ot='absolute',d=new b(pageXOffset,pageYOffset),a!=document.body&&(nt=n.offsetParent,rt=nt.getBoundingClientRect(),d=new b(nt.scrollLeft-rt.left,nt.scrollTop-rt.top))),st={position:ot,left:e.x+d.x,top:e.y+d.y,minWidth:v,display:'',visibility:'',zIndex:1500},r&&(n.style.opacity='0',pi(function(t){n.style.opacity=t==1?'':t.toString()})),t instanceof HTMLElement&&(n[f._OWNR_KEY]=t),et(n,st),p=t instanceof MouseEvent?t.target:t,p instanceof HTMLElement){var pt=Date.now(),ht=p.getBoundingClientRect(),ct=new f(document.createElement('div'));n[f._SCRL_KEY]=ct;ct.addEventListener(document,'scroll',function(i){if(Date.now()-pt>100&&g(document,p)&&!g(n,i.target)&&(i.target!=document||t!=null&&n.style.position=='fixed')){var r=p.getBoundingClientRect(),u=Math.abs(r.left-ht.left),f=Math.abs(r.top-ht.top);(u>1||f>1)&&ir(n,!0)}},!0)}}function of(n,t,i){t===void 0&&(t=!0);i===void 0&&(i=!1);i?pi(function(i){n.style.opacity=(1-i).toString();i==1&&(ir(n,t),n.style.opacity='')}):ir(n,t)}function ir(n,t){n.style.display='none';t&&n.parentElement&&setTimeout(function(){if(n.style.display=='none'){var t=n.parentElement;t&&t.removeChild(n)}},50);var i=n[f._SCRL_KEY];i instanceof f&&i.dispose();delete n[f._SCRL_KEY];delete n[f._OWNR_KEY]}function sf(){return eu}function rr(){return ou}function hf(){return su}function si(){return hu}function cf(){return ur}function er(n,t){return fr?{capture:n,passive:t}:n}function lf(n,t){n.effectAllowed=t;rr()&&n.setData('text','')}var sr,hr,ci,y,wr,b,gt,ct,lt,tt,ni,gr,h,k,ot,nu,tu,f,a,s,d,fi,ki,ei,di,oi,it,ti,gi,iu,ef,nr,tr,ru,fu,ii,at,eu,ou,su,hu,ur,fr,or,cu,hi;Object.defineProperty(t,"__esModule",{value:!0});sr=window.wijmo&&window.wijmo.culture;window.wijmo=i;t.culture=sr;hr='5.20172.359';t.getVersion=cr,function(n){n[n.Back=8]="Back";n[n.Tab=9]="Tab";n[n.Enter=13]="Enter";n[n.Escape=27]="Escape";n[n.Space=32]="Space";n[n.PageUp=33]="PageUp";n[n.PageDown=34]="PageDown";n[n.End=35]="End";n[n.Home=36]="Home";n[n.Left=37]="Left";n[n.Up=38]="Up";n[n.Right=39]="Right";n[n.Down=40]="Down";n[n.Delete=46]="Delete";n[n.F1=112]="F1";n[n.F2=113]="F2";n[n.F3=114]="F3";n[n.F4=115]="F4";n[n.F5=116]="F5";n[n.F6=117]="F6";n[n.F7=118]="F7";n[n.F8=119]="F8";n[n.F9=120]="F9";n[n.F10=121]="F10";n[n.F11=122]="F11";n[n.F12=123]="F12"}(ci=t.Key||(t.Key={})),function(n){n[n.Object=0]="Object";n[n.String=1]="String";n[n.Number=2]="Number";n[n.Boolean=3]="Boolean";n[n.Date=4]="Date";n[n.Array=5]="Array"}(y=t.DataType||(t.DataType={}));t.tryCast=vt;t.isPrimitive=li;t.isString=o;t.isNullOrWhiteSpace=lu;t.isNumber=v;t.isInt=lr;t.isBoolean=yt;t.isFunction=rt;t.isUndefined=au;t.isDate=c;t.isArray=ut;t.isObject=ri;t.getUniqueId=ar;t.mouseToPage=vu;t.getType=yu;t.changeType=vr;t.toFixed=ai;t.format=pu;t.clamp=e;t.copy=st;t.assert=r;t._deprecated=wu;t.asString=p;t.asNumber=u;t.asInt=pt;t.asBoolean=l;t.asDate=yr;t.asFunction=w;t.asArray=wt;t.asType=bt;t.asEnum=pr;t.asCollectionView=bu;t.hasItems=ku;t.toHeaderCase=du;t.escapeHtml=gu;wr={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;'};t.hasClass=ui;t.removeClass=br;t.addClass=kt;t.toggleClass=ht;t.setAttribute=kr;t.setSelectionRange=vi;t.getActiveElement=dt;t.moveFocus=nf;t.getElement=ft;t.createElement=yi;t.setText=tf;t.contains=g;t.closest=nt;t.closestClass=rf;t.enable=dr;t.getElementRect=uf;t.setCss=et;t.animate=pi;b=function(){function n(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this.x=u(n);this.y=u(t)}return n.prototype.equals=function(t){return t instanceof n&&this.x==t.x&&this.y==t.y},n.prototype.clone=function(){return new n(this.x,this.y)},n}();t.Point=b;gt=function(){function n(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this.width=u(n);this.height=u(t)}return n.prototype.equals=function(t){return t instanceof n&&this.width==t.width&&this.height==t.height},n.prototype.clone=function(){return new n(this.width,this.height)},n}();t.Size=gt;ct=function(){function n(n,t,i,r){this.left=u(n);this.top=u(t);this.width=u(i);this.height=u(r)}return Object.defineProperty(n.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),n.prototype.equals=function(t){return t instanceof n&&this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height},n.prototype.clone=function(){return new n(this.left,this.top,this.width,this.height)},n.fromBoundingRect=function(t){if(t.left!=null)return new n(t.left,t.top,t.width,t.height);if(t.x!=null)return new n(t.x,t.y,t.width,t.height);r(!1,'Invalid source rectangle.')},n.union=function(t,i){var r=Math.min(t.left,i.left),u=Math.min(t.top,i.top),f=Math.max(t.right,i.right),e=Math.max(t.bottom,i.bottom);return new n(r,u,f-r,e-u)},n.intersection=function(t,i){var r=Math.max(t.left,i.left),u=Math.max(t.top,i.top),f=Math.min(t.right,i.right),e=Math.min(t.bottom,i.bottom);return new n(r,u,f-r,e-u)},n.prototype.contains=function(t){if(t instanceof b)return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom;if(t instanceof n){var i=t;return i.left>=this.left&&i.right<=this.right&&i.top>=this.top&&i.bottom<=this.bottom}r(!1,'Point or Rect expected.')},n.prototype.inflate=function(t,i){return new n(this.left-t,this.top-i,this.width+2*t,this.height+2*i)},n}();t.Rect=ct;lt=function(){function n(){}return n.addDays=function(t,i){return n.newDate(t.getFullYear(),t.getMonth(),t.getDate()+i)},n.addMonths=function(t,i){return n.newDate(t.getFullYear(),t.getMonth()+i,t.getDate())},n.addYears=function(t,i){return n.newDate(t.getFullYear()+i,t.getMonth(),t.getDate())},n.addHours=function(t,i){return n.newDate(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()+i)},n.addMinutes=function(t,i){return n.newDate(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()+i)},n.addSeconds=function(t,i){return n.newDate(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()+i)},n.sameDate=function(n,t){return c(n)&&c(t)&&n.getFullYear()==t.getFullYear()&&n.getMonth()==t.getMonth()&&n.getDate()==t.getDate()},n.sameTime=function(n,t){return c(n)&&c(t)&&n.getHours()==t.getHours()&&n.getMinutes()==t.getMinutes()&&n.getSeconds()==t.getSeconds()},n.equals=function(n,t){return c(n)&&c(t)&&n.getTime()==t.getTime()},n.fromDateTime=function(t,i){return!t&&!i?null:(t||(t=i),i||(i=t),n.newDate(t.getFullYear(),t.getMonth(),t.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()))},n.toFiscal=function(i,r){var u=t.culture.Globalize.calendar;return ut(u.fiscalYearOffsets)?n.addMonths(i,-u.fiscalYearOffsets[r?0:1]):i},n.fromFiscal=function(i,r){var u=t.culture.Globalize.calendar;return ut(u.fiscalYearOffsets)?n.addMonths(i,+u.fiscalYearOffsets[r?0:1]):i},n.newDate=function(n,t,i,r,u,f,e){var s,o,h;return(n==null||t==null||i==null)&&(s=new Date,n==null&&(n=s.getFullYear()),t==null&&(t=s.getMonth()),i==null&&(i=s.getDate())),r==null&&(r=0),u==null&&(u=0),f==null&&(f=0),e==null&&(e=0),o=new Date(n,t,i,r,u,f,e),h=o.getFullYear(),n<100&&h>=1900&&o.setFullYear(o.getFullYear()-1900),o},n.clone=function(t){return n.fromDateTime(t,t)},n}();t.DateTime=lt;t.httpRequest=wi;t.culture=window.wijmo.culture||{Globalize:{numberFormat:{'.':'.',',':',',percent:{pattern:['-n %','n %']},currency:{decimals:2,symbol:'$',pattern:['($n)','$n']}},calendar:{'/':'/',':':':',firstDay:0,days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],daysAbbr:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsAbbr:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],am:['AM','A'],pm:['PM','P'],eras:['A.D.','B.C.'],patterns:{d:'M/d/yyyy',D:'dddd, MMMM dd, yyyy',f:'dddd, MMMM dd, yyyy h:mm tt',F:'dddd, MMMM dd, yyyy h:mm:ss tt',t:'h:mm tt',T:'h:mm:ss tt',M:'MMMM d',m:'MMMM d',Y:'MMMM, yyyy',y:'MMMM, yyyy',g:'M/d/yyyy h:mm tt',G:'M/d/yyyy h:mm:ss tt',s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:'dddd, MMMM dd, yyyy h:mm:ss tt'},fiscalYearOffsets:[-3,-3]}}};tt=function(){function n(){}return n.format=function(t,i,r,u){return o(t)?t:v(t)?(i=i||(t==Math.round(t)?'n0':'n2'),n.formatNumber(t,i,r,u)):c(t)?(i=i||'d',n.formatDate(t,i)):t!=null?t.toString():''},n.formatNumber=function(i,r,f,e){var a,b,v;i=u(i);r=p(r);var c=t.culture.Globalize.numberFormat,h=r?r.match(/([a-z])(\d*)(,*)(.*)/i):null,s=h?h[1].toLowerCase():'n',l=h&&h[2]?parseInt(h[2]):s=='c'?c.currency.decimals:i==Math.round(i)?0:2,k=h&&h[3]?3*h[3].length:0,d=h&&h[4]?h[4]:c.currency.symbol,y=c['.'],w=c[','],o;if(k&&(i/=Math.pow(10,k)),s=='d'||s=='x'){for(o=Math.round(Math.abs(i)).toString(s=='d'?10:16);o.length<l;)o='0'+o;return i<0&&(o='-'+o),r&&r[0]=='X'&&(o=o.toUpperCase()),o}return s=='p'&&(i=n._mul100(i),i=ai(i,l,e)),e&&s!='p'&&(i=ai(i,l,!0)),o=s=='c'||s=='p'?Math.abs(i).toFixed(l):i.toFixed(l),(f||s=='g')&&o.indexOf('.')>-1&&(o=o.replace(/(\.[0-9]*?)0+$/g,'$1'),o=o.replace(/\.$/,'')),y!='.'&&(o=o.replace('.',y)),w&&(s=='n'||s=='c'||s=='p')&&(a=o.indexOf(y),b=/\B(?=(\d\d\d)+(?!\d))/g,o=a>-1?o.substr(0,a).replace(b,w)+o.substr(a):o.replace(b,w)),s=='c'&&(v=c.currency.pattern[i<0?0:1],o=v.replace('n',o).replace('$',d)),s=='p'&&(v=c.percent.pattern[i<0?0:1],o=v.replace('n',o)),o},n.formatDate=function(t,i){var u,f,r;t=yr(t);switch(i){case'r':case'R':return t.toUTCString();case'u':return t.toISOString().replace(/\.\d{3}/,'')}for(i=n._expandFormat(i),u=n._parseDateFormat(i),r=0;r<u.length;r++)switch(u[r]){case'U':case'EEEE':case'EEE':case'EE':case'E':case'u':case'eeee':case'eee':case'ee':case'e':t=lt.toFiscal(t,u[r]==u[r].toUpperCase());r+=u.length}for(f='',r=0;r<u.length;r++)f+=n._formatDatePart(t,i,u[r]);return f},n.parseInt=function(t,i){return Math.round(n.parseFloat(t,i))},n.parseFloat=function(n,i){var r=n.indexOf('-')>-1||n.indexOf('(')>-1&&n.indexOf(')')>-1?-1:1,u=n.indexOf('%')>-1?.01:1,f=i?i.match(/,+/):null,e=f?f[0].length*3:0;if(i&&(i[0]=='x'||i[0]=='X'))return n=n.replace(/[^0-9a-f]+.*$/gi,''),parseInt(n,16)*r*u*Math.pow(10,e);var o=t.culture.Globalize.numberFormat['.'],s=new RegExp('[^\\d\\'+o+']','g'),h=n.replace(s,'').replace(o,'.');return parseFloat(h)*r*u*Math.pow(10,e)},n.parseDate=function(i,r){var e,et,s,b,vt,it,yt;if(i=p(i),!i)return null;if(r=='u')return new Date(i);if(r=='R'||r=='r')return et=/(([0-9]+)\-([0-9]+)\-([0-9]+))?\s?(([0-9]+):([0-9]+)(:([0-9]+))?)?/,s=i.match(et),s[1]||s[5]?(e=s[1]?new Date(parseInt(s[2]),parseInt(s[3])-1,parseInt(s[4])):new Date,s[5]&&(e.setHours(parseInt(s[6])),e.setMinutes(parseInt(s[7])),e.setSeconds(s[8]?parseInt(s[9]):0))):e=new Date(i),isNaN(e.getTime())?null:e;r=n._expandFormat(r?r:'d');var c=t.culture.Globalize.calendar,ot=n._CJK,pt=new RegExp('(\\'+c['/']+')|(\\'+c[':']+")|(\\d+)|(["+ot+"\\.]{2,})|(["+ot+']+)','gi'),h=i.match(pt),k=n._parseDateFormat(r),w=0,l=-1,a=0,nt=1,o=0,d=0,g=0,st=0,rt=-1,ht,ut,ct,tt,at,ft;if(!h||!h.length||!k||!k.length)return null;for(b=0;b<k.length&&h;b++){var y=b-w,u=y>-1&&y<h.length?h[y]:'',f=k[b].length;switch(k[b]){case'EEEE':case'EEE':case'EE':case'E':case'eeee':case'eee':case'ee':case'e':ft=k[b];case'yyyy':case'yyy':case'yy':case'y':f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);l=parseInt(u);at=u.length==4;break;case'MMMM':case'MMM':for(tt=!0,vt=u.toLowerCase(),a=-1,it=0;it<12;it++)if(c.months[it].toLowerCase().indexOf(vt)==0){a=it;break}if(a>-1)break;case'MM':case'M':tt=!0;f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);a=parseInt(u)-1;break;case'dddd':case'ddd':ht=!0;break;case'dd':case'd':f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);nt=parseInt(u);ut=!0;break;case'hh':case'h':f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);o=parseInt(u);o=o==12?0:o;break;case'HH':f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);o=parseInt(u);break;case'H':o=parseInt(u);break;case'mm':case'm':f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);d=parseInt(u);break;case'ss':case's':f>1&&u.length>f&&(h[y]=u.substr(f),u=u.substr(0,f),w++);g=parseInt(u);break;case'fffffff':case'FFFFFFF':case'ffffff':case'FFFFFF':case'fffff':case'FFFFF':case'ffff':case'FFFF':case'fff':case'FFF':case'ff':case'FF':case'f':case'F':st=parseInt(u)/Math.pow(10,f-3);break;case'tt':case't':u=u.toUpperCase();o<12&&c.pm.indexOf(u)>-1&&(o+=12);break;case'q':case'Q':case'u':case'U':ct=!0;break;case'ggg':case'gg':case'g':rt=c.eras.length>1?n._getEra(u,c):-1;break;case c['/']:case c[':']:if(u&&u!=k[b])return null;break;case'K':break;default:n._unquote(k[b])!=u&&w++}}if(tt&&ut&&(isNaN(o)&&(o=0),isNaN(d)&&(d=0),isNaN(g)&&(g=0)),a<0||a>11||isNaN(a)||nt<0||nt>31||isNaN(nt)||o<0||o>24||isNaN(o)||d<0||d>60||isNaN(d)||g<0||g>60||isNaN(g))return null;if(ft){if(!tt)return null;e=new Date(l,a);e=lt.fromFiscal(e,ft[0]=='E');l=e.getFullYear();a=e.getMonth()}return ht&&!ut?null:ct&&!tt?null:(l<0&&(l=(new Date).getFullYear()),rt>-1?l=l+c.eras[rt].start.getFullYear()-1:l<100&&!at&&(yt=v(c.twoDigitYearMax)?c.twoDigitYearMax:2029,l+=l+2e3<yt?2e3:1900),e=lt.newDate(l,a,nt,o,d+0,g,st),isNaN(e.getTime())?null:e)},n.getFirstDayOfWeek=function(){var n=t.culture.Globalize.calendar.firstDay;return n?n:0},n.getNumberDecimalSeparator=function(){var n=t.culture.Globalize.numberFormat['.'];return n?n:'.'},n._unquote=function(n){return n.length>1&&n[0]==n[n.length-1]&&(n[0]=='\''||n[0]=='\"')?n.substr(1,n.length-2):n},n._parseDateFormat=function(t){var u,e,i,r,f;if(t in n._dateFormatParts)return n._dateFormatParts[t];for(u=[],e='',i=0;i>-1&&i<t.length;i++){if(f=t[i],(f=='\''||f=='"')&&(r=t.indexOf(f,i+1),r>-1)){u.push(t.substring(i,r+1));i=r;continue}for(r=i+1;r<t.length;r++)if(t[r]!=f)break;u.push(t.substring(i,r));i=r-1}return n._dateFormatParts[t]=u,u},n._formatDatePart=function(i,r,u){var f=t.culture.Globalize.calendar,o=0,s=0,a=0,e=u.length,v,l,h,c;switch(u){case'yyyy':case'yyy':case'yy':case'y':case'EEEE':case'EEE':case'EE':case'E':case'eeee':case'eee':case'ee':case'e':return s=i.getFullYear(),f.eras.length>1&&r.indexOf('g')>-1&&(o=n._getEra(i,f),o>-1&&(s=s-f.eras[o].start.getFullYear()+1)),v=u.length<3?s%100:u.length==3?s%1e3:s,n._zeroPad(v,u.length);case'MMMM':return f.months[i.getMonth()];case'MMM':return f.monthsAbbr[i.getMonth()];case'MM':case'M':return n._zeroPad(i.getMonth()+1,e);case'dddd':return f.days[i.getDay()];case'ddd':return f.daysAbbr[i.getDay()];case'dd':return n._zeroPad(i.getDate(),2);case'd':return i.getDate().toString();case'hh':case'h':return n._zeroPad(n._h12(i),e);case'HH':case'H':return n._zeroPad(i.getHours(),e);case'mm':case'm':return n._zeroPad(i.getMinutes(),e);case'ss':case's':return n._zeroPad(i.getSeconds(),e);case'fffffff':case'FFFFFFF':case'ffffff':case'FFFFFF':case'fffff':case'FFFFF':case'ffff':case'FFFF':case'fff':case'FFF':case'ff':case'FF':case'f':case'F':return a=i.getMilliseconds()*Math.pow(10,e-3),u[0]=='f'?n._zeroPad(a,e):a.toFixed(0);case'tt':return i.getHours()<12?f.am[0]:f.pm[0];case't':return i.getHours()<12?f.am[1]:f.pm[1];case'q':case'Q':case'u':case'U':return(Math.floor(i.getMonth()/3)+1).toString();case'ggg':case'gg':case'g':return f.eras.length>1&&(o=n._getEra(i,f),o>-1)?u=='ggg'?f.eras[o].name:u=='gg'?f.eras[o].name[0]:f.eras[o].symbol:f.eras[0];case':':case'/':return f[u];case'K':return l=i.toString().match(/(\+|\-)(\d{2})(\d{2})/),l?l[1]+l[2]+l[3]:'';case'zzz':case'zz':case'z':h=-i.getTimezoneOffset();c=void 0;switch(u){case'zzz':c=n.format(h/60,'d2',!1,!0)+f[':']+n.format(h%60,'d2',!1,!0);break;case'zz':c=n.format(h/60,'d2',!1,!0);break;case'z':c=n.format(h/60,'d',!1,!0)}return h>=0?'+'+c:c}return e>1&&u[0]==u[e-1]&&(u[0]=='\"'||u[0]=='\'')?u.substr(1,e-2):u},n._getEra=function(n,t){var i;if(c(n)){for(i=0;i<t.eras.length;i++)if(n>=t.eras[i].start)return i}else if(o(n))for(i=0;i<t.eras.length;i++)if(t.eras[i].name&&(t.eras[i].name.indexOf(n)==0||t.eras[i].symbol.indexOf(n)==0))return i;return-1},n._expandFormat=function(n){var i=t.culture.Globalize.calendar.patterns[n];return i?i:n},n._zeroPad=function(n,t){var i=n.toFixed(0),r=t-i.length+1;return r>0?Array(r).join('0')+i:i},n._h12=function(n){var r=t.culture.Globalize.calendar,i=n.getHours();return r.am&&r.am[0]&&(i=i%12,i==0&&(i=12)),i},n._mul100=function(n){var t=n.toString(),i=t.indexOf('.');return t.indexOf('e')>-1?n*100:(i<0?t+='00':(i+=2,t=t.replace('.','')+'00',t=t.substr(0,i)+'.'+t.substr(i)),parseFloat(t))},n}();tt._CJK='a-z'+'u00c0-u017fu3000-u30ffu4e00-u9faf'.replace(/u/g,'\\u')+'u1100-u11ffu3130-u318fua960-ua97fuac00-ud7afud7b0-ud7ff'.replace(/u/g,'\\u');tt._dateFormatParts={};t.Globalize=tt;t._updateCulture=ff;ni=function(){function n(n){this.path=n}return Object.defineProperty(n.prototype,"path",{get:function(){return this._path},set:function(n){var t,i,r;for(this._path=n,this._parts=n?n.split('.'):[],t=0;t<this._parts.length;t++)i=this._parts[t],r=i.indexOf('['),r>-1&&(this._parts[t]=i.substr(0,r),this._parts.splice(++t,0,parseInt(i.substr(r+1))));this._key=this._parts.length==1?this._parts[0]:null},enumerable:!0,configurable:!0}),n.prototype.getValue=function(n){if(n){if(this._key)return n[this._key];if(this._path&&this._path in n)return n[this._path];for(var t=0;t<this._parts.length&&n;t++)n=n[this._parts[t]]}return n},n.prototype.setValue=function(n,t){if(n){if(this._path in n){n[this._path]=t;return}for(var i=0;i<this._parts.length-1;i++)if(n=n[this._parts[i]],n==null)return;n[this._parts[this._parts.length-1]]=t}},n}();t.Binding=ni;gr=function(){function n(n,t){this.handler=n;this.self=t}return n}();h=function(){function n(){this._handlers=[]}return n.prototype.addHandler=function(n,t){w(n);this._handlers.push(new gr(n,t))},n.prototype.removeHandler=function(n,t){var i,r;for(w(n),i=0;i<this._handlers.length;i++)if(r=this._handlers[i],(r.handler==n||n==null)&&(r.self==t||t==null)&&(this._handlers.splice(i,1),n&&t))break},n.prototype.removeAllHandlers=function(){this._handlers.length=0},n.prototype.raise=function(n,t){var i,r;for(t===void 0&&(t=k.empty),i=0;i<this._handlers.length;i++)r=this._handlers[i],r.handler.call(r.self,n,t)},Object.defineProperty(n.prototype,"hasHandlers",{get:function(){return this._handlers.length>0},enumerable:!0,configurable:!0}),n}();t.Event=h;k=function(){function n(){}return n}();k.empty=new k;t.EventArgs=k;ot=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.cancel=!1,t}return __extends(t,n),t}(k);t.CancelEventArgs=ot;nu=function(n){function t(t,i,r){var u=n.call(this)||this;return u._name=t,u._oldVal=i,u._newVal=r,u}return __extends(t,n),Object.defineProperty(t.prototype,"propertyName",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oldValue",{get:function(){return this._oldVal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newValue",{get:function(){return this._newVal},enumerable:!0,configurable:!0}),t}(k);t.PropertyChangedEventArgs=nu;tu=function(n){function t(t,i){var r=n.call(this)||this;return r._xhr=t,r._msg=i,r}return __extends(t,n),Object.defineProperty(t.prototype,"request",{get:function(){return this._xhr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._msg},set:function(n){this._msg=n},enumerable:!0,configurable:!0}),t}(ot);t.RequestErrorEventArgs=tu;f=function(){function n(t,i,u){var a,f,v,s,c;if(i===void 0&&(i=null),u===void 0&&(u=!1),a=this,this._focus=!1,this._updating=0,this._fullUpdate=!1,this.gotFocus=new h,this.lostFocus=new h,n._updateWme(),r(n.getControl(t)==null,'Element is already hosting a control.'),f=ft(t),r(f!=null,'Cannot find the host element.'),this._orgOuter=f.outerHTML,this._orgInner=f.innerHTML,this._orgTag=f.tagName,(f.tagName=='INPUT'||f.tagName=='SELECT')&&(f=this._replaceWithDiv(f)),this._e=f,f[n._CTRL_KEY]=this,u==!0&&(this._szCtl=new gt(f.offsetWidth,f.offsetHeight),v=this._handleResize.bind(this),this.addEventListener(window,'resize',v)),this.addEventListener(f,'focus',function(){s&&clearTimeout(s);s=setTimeout(function(){s=null;a._updateFocusState()})},!0),this.addEventListener(f,'blur',function(){s&&clearTimeout(s);s=setTimeout(function(){s=null;a._updateFocusState()},20)},!0),c=this._handleDisabled.bind(this),this.addEventListener(f,'mousedown',c,!0),this.addEventListener(f,'mouseup',c,!0),this.addEventListener(f,'click',c,!0),this.addEventListener(f,'dblclick',c,!0),this.addEventListener(f,'keydown',c,!0),this.addEventListener(f,'wheel',c,er(!0,!0)),n._touching==null&&(n._touching=!1,'ontouchstart'in window||'onpointerdown'in window)){var e=document.body,y=this._handleTouchStart,l=this._handleTouchEnd,o=er(!1,!0);'ontouchstart'in window?(e.addEventListener('touchstart',y,o),e.addEventListener('touchend',l,o),e.addEventListener('touchcancel',l,o),e.addEventListener('touchleave',l,o)):'onpointerdown'in window&&(e.addEventListener('pointerdown',y,o),e.addEventListener('pointerup',l,o),e.addEventListener('pointerout',l,o),e.addEventListener('pointercancel',l,o),e.addEventListener('pointerleave',l,o))}}return n.prototype.getTemplate=function(){for(var t,n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))if(t=n.constructor.controlTemplate,t)return t;return null},n.prototype.applyTemplate=function(t,i,r,u){var f=this._e,c,l,w,a,b,k,d,p,o,v,h,s;t&&kt(f,t);c=null;i&&(c=yi(i,f));var g=f.querySelectorAll('input'),e=g.length==1?g[0]:null,y=f.attributes;if(e&&y)for(l=0;l<y.length;l++)w=y[l].name,w.match(n._rxInputAtts)&&e.setAttribute(w,y[l].value);if(e&&f.id){for(a=f;a.parentElement;)a=a.parentElement;b=a.querySelector('label[for="'+f.id+'"]');b instanceof HTMLLabelElement&&(k=ar(f.id+'_input'),e.id=k,b.htmlFor=k)}if(e&&(d=document.createEvent('HTMLEvents'),p=e.value,d.initEvent('change',!0,!1),this.addEventListener(e,'input',function(){p=e.value},!0),this.gotFocus.addHandler(function(){p=e.value}),this.lostFocus.addHandler(function(){p!=e.value&&e.dispatchEvent(d)})),e?f.tabIndex=-1:f.getAttribute('tabindex')||(f.tabIndex=0),this._updateState(),r)for(o in r){if(v=r[o],this[o]=c.querySelector('[wj-part="'+v+'"]'),this[o]==null&&c.getAttribute('wj-part')==v&&(this[o]=c),this[o]==null)throw'Missing template part: "'+v+'"';v==u&&(h='name',s=f.attributes[h],s&&s.value&&this[o].setAttribute(h,s.value),h='accesskey',s=f.attributes[h],s&&s.value&&(this[o].setAttribute(h,s.value),f.removeAttribute(h)))}return c},n.prototype.dispose=function(){for(var f,r,t,i,e=this._e.querySelectorAll('.wj-control'),u=0;u<e.length;u++)f=n.getControl(e[u]),f&&f.dispose();this._toInv&&(clearTimeout(this._toInv),this._toInv=null);this.removeEventListener();for(t in this)t.length>2&&t.indexOf('on')==0&&(i=this[t[2].toLowerCase()+t.substr(3)],i instanceof h&&i.removeAllHandlers());if(r=this.collectionView,r instanceof ti)for(t in r)i=r[t],i instanceof h&&i.removeHandler(null,this);this._e.parentNode&&(this._e.outerHTML=this._orgOuter);this._e[n._CTRL_KEY]=null;this._e=this._orgOuter=this._orgInner=this._orgTag=null},n.getControl=function(t){var i=ft(t);return i?bt(i[n._CTRL_KEY],n,!0):null},Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rightToLeft",{get:function(){return this._rtlDir==null&&(this._rtlDir=this._e?getComputedStyle(this._e).direction=='rtl':!1),this._rtlDir},enumerable:!0,configurable:!0}),n.prototype.focus=function(){this._e&&this._e.focus()},n.prototype.containsFocus=function(){var i,t,u,r;if(!this._e)return!1;if(i=dt(),g(this._e,i))return!0;for(t=i;t;t=t.parentElement)if(u=t[n._OWNR_KEY],u&&g(this._e,u))return!0;return(r=n.getControl(nt(i,'.wj-control.wj-popup')),r&&r.owner&&g(this._e,r.owner))?!0:!1},n.prototype.invalidate=function(t){var i=this;t===void 0&&(t=!0);this._rtlDir=null;this._fullUpdate=this._fullUpdate||t;this._toInv&&(clearTimeout(this._toInv),this._toInv=null);this.isUpdating||(this._toInv=setTimeout(function(){i.refresh(i._fullUpdate);i._toInv=null},n._REFRESH_INTERVAL))},n.prototype.refresh=function(t){t===void 0&&(t=!0);!this.isUpdating&&this._toInv&&(clearTimeout(this._toInv),this._toInv=null,this._rtlDir=null,this._fullUpdate=!1,n._updateWme())},n.invalidateAll=function(t){var i,r;if(t||(t=document.body),t.children)for(i=0;i<t.children.length;i++)n.invalidateAll(t.children[i]);r=n.getControl(t);r&&r.invalidate()},n.refreshAll=function(t){var i,r;if(t||(t=document.body),t.children)for(i=0;i<t.children.length;i++)n.refreshAll(t.children[i]);r=n.getControl(t);r&&r.refresh()},n.disposeAll=function(t){var r=n.getControl(t),i;if(r)r.dispose();else if(t.children)for(i=0;i<t.children.length;i++)n.disposeAll(t.children[i])},n.prototype.beginUpdate=function(){this._updating++},n.prototype.endUpdate=function(){this._updating--;this._updating<=0&&this.invalidate()},Object.defineProperty(n.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),n.prototype.deferUpdate=function(n){try{this.beginUpdate();n()}finally{this.endUpdate()}},Object.defineProperty(n.prototype,"isTouching",{get:function(){return n._touching},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return this._e&&this._e.getAttribute('disabled')!=null},set:function(n){n=l(n,!0);n!=this.isDisabled&&dr(this._e,!n)},enumerable:!0,configurable:!0}),n.prototype.initialize=function(n){n&&st(this,n)},n.prototype.addEventListener=function(n,t,i,r){r===void 0&&(r=!1);n&&(n.addEventListener(t,i,r),this._listeners==null&&(this._listeners=[]),this._listeners.push({target:n,type:t,fn:i,capture:r}))},n.prototype.removeEventListener=function(n,t,i,r){var e=0,f,u;if(this._listeners)for(f=0;f<this._listeners.length;f++)u=this._listeners[f],(n==null||n==u.target)&&(t==null||t==u.type)&&(i==null||i==u.fn)&&(r==null||r==u.capture)&&(u.target.removeEventListener(u.type,u.fn,u.capture),this._listeners.splice(f,1),f--,e++);return e},n.prototype.onGotFocus=function(n){this.gotFocus.raise(this,n)},n.prototype.onLostFocus=function(n){this.lostFocus.raise(this,n)},n.prototype._hasPendingUpdates=function(){return this._toInv!=null},n._updateWme=function(){var i,r,t;if(!n._wme||!n._wme.parentElement||!n._wme.offsetWidth||!n._wme.offsetHeight){i=Array(Math.round(Math.random()*10)).join(' ');r='Powered by Wijmo '+cr()+' Eval';n._wme=yi('<div><a href="http://wijmo.com/products/wijmo-5/eval/'+i+'">'+r+i+'</a></div>');t={position:'fixed',padding:5,margin:5,background:'#fff',boxShadow:'0 0 10px rgba(0,0,0,0.25)',fontSize:'11pt',zIndex:1e3,opacity:.8,display:'block',visibility:'visible',height:'auto',width:'auto',transform:'none'};switch(Math.round(Math.random()*100)%2){case 0:t.right=t.bottom=0;break;case 1:t.left=t.bottom=0;break;case 2:t.right=t.top=0}et(n._wme,t);document.body.appendChild(n._wme)}},n.prototype._handleResize=function(){if(this._e.parentElement){var n=new gt(this._e.offsetWidth,this._e.offsetHeight);n.equals(this._szCtl)||(this._szCtl=n,this.invalidate())}},n.prototype._updateFocusState=function(){var t=this;setTimeout(function(){for(var i,u,f,e,r=t._e;r;r=r.parentElement)i=n.getControl(r),i&&(u=i.containsFocus(),u!=i._focus&&(i._focus=u,u?i.onGotFocus():i.onLostFocus(),i._updateState(),u||(f=r[n._OWNR_KEY],f&&(e=n.getControl(nt(f,'.wj-control')),e&&e._updateFocusState()))))})},n.prototype._updateState=function(){var n=this.hostElement,t,i;n&&(ht(n,'wj-state-focused',this.containsFocus()),t=n.querySelector('input'),t instanceof HTMLInputElement&&(ht(n,'wj-state-empty',t.value.length==0),ht(n,'wj-state-readonly',t.readOnly),i=t.validationMessage,ht(n,'wj-state-invalid',i&&i.length>0)))},n.prototype._handleTouchStart=function(t){(t.pointerType==null||t.pointerType=='touch')&&(n._touching=!0)},n.prototype._handleTouchEnd=function(t){(t.pointerType==null||t.pointerType=='touch')&&setTimeout(function(){n._touching=!1},400)},n.prototype._handleDisabled=function(n){this.isDisabled&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation())},n.prototype._replaceWithDiv=function(t){var r=document.createElement('div'),u,i,f;for(t.parentElement.replaceChild(r,t),r.innerHTML=t.innerHTML,u=t.attributes,i=0;i<u.length;i++)f=u[i].name,(f.match(/id|style|class/i)||f.match(n._rxInputAtts))&&r.setAttribute(f,u[i].value);return r},n}();f._REFRESH_INTERVAL=10;f._ANIM_DEF_DURATION=400;f._ANIM_DEF_STEP=35;f._CTRL_KEY='$WJ-CTRL';f._OWNR_KEY='$WJ-OWNR';f._SCRL_KEY='$WJ-SCRL';f._rxInputAtts=/name|tabindex|placeholder|autofocus|autocomplete|autocorrect|autocapitalize|spellcheck|readonly|minlength|maxlength|pattern/i;t.Control=f,function(n){n[n.None=0]="None";n[n.Sum=1]="Sum";n[n.Cnt=2]="Cnt";n[n.Avg=3]="Avg";n[n.Max=4]="Max";n[n.Min=5]="Min";n[n.Rng=6]="Rng";n[n.Std=7]="Std";n[n.Var=8]="Var";n[n.StdPop=9]="StdPop";n[n.VarPop=10]="VarPop";n[n.CntAll=11]="CntAll";n[n.First=12]="First";n[n.Last=13]="Last"}(a=t.Aggregate||(t.Aggregate={}));t.getAggregate=bi,function(n){n[n.Add=0]="Add";n[n.Remove=1]="Remove";n[n.Change=2]="Change";n[n.Reset=3]="Reset"}(s=t.NotifyCollectionChangedAction||(t.NotifyCollectionChangedAction={}));d=function(n){function t(t,i,r){t===void 0&&(t=s.Reset);i===void 0&&(i=null);r===void 0&&(r=-1);var u=n.call(this)||this;return u.action=t,u.item=i,u.index=r,u}return __extends(t,n),t}(k);d.reset=new d(s.Reset);t.NotifyCollectionChangedEventArgs=d;fi=function(){function n(n,t){this._bnd=new ni(n);this._asc=t}return Object.defineProperty(n.prototype,"property",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ascending",{get:function(){return this._asc},enumerable:!0,configurable:!0}),n}();t.SortDescription=fi;ki=function(n){function t(t){var i=n.call(this)||this;return i.newPageIndex=t,i}return __extends(t,n),t}(ot);t.PageChangingEventArgs=ki;ei=function(){function n(){}return n.prototype.groupNameFromItem=function(){return''},n.prototype.namesMatch=function(n,t){return n===t},n}();t.GroupDescription=ei;di=function(n){function t(t,i){var r=n.call(this)||this;return r._bnd=new ni(t),r._converter=i,r}return __extends(t,n),Object.defineProperty(t.prototype,"propertyName",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),t.prototype.groupNameFromItem=function(n){return this._converter?this._converter(n,this.propertyName):this._bnd.getValue(n)},t.prototype.namesMatch=function(n,t){return n===t},t}(ei);t.PropertyGroupDescription=di;oi=function(){function n(){this.length=0;Array.apply(this,arguments)}return n.prototype.pop=function(){return null},n.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0},n.prototype.splice=function(){return null},n.prototype.slice=function(){return null},n.prototype.indexOf=function(){return-1},n.prototype.sort=function(){return null},n.prototype.forEach=function(){return null},n.prototype.filter=function(){return null},n}();t.ArrayBase=oi;oi.prototype=Array.prototype;it=function(n){function t(t){var i=n.call(this)||this,r;if(i._updating=0,i.collectionChanged=new h,t){for(t=wt(t),i._updating++,r=0;r<t.length;r++)i.push(t[r]);i._updating--}return i}return __extends(t,n),t.prototype.push=function(){for(var u,i,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(u=this.length,i=0;t&&i<t.length;i++)u=n.prototype.push.call(this,t[i]),this._updating||this._raiseCollectionChanged(s.Add,t[i],u-1);return u},t.prototype.pop=function(){var t=n.prototype.pop.call(this);return this._raiseCollectionChanged(s.Remove,t,this.length),t},t.prototype.splice=function(t,i,r){var u;return i&&r?(u=n.prototype.splice.call(this,t,i,r),i==1?this._raiseCollectionChanged(s.Change,r,t):this._raiseCollectionChanged(),u):r?(u=n.prototype.splice.call(this,t,0,r),this._raiseCollectionChanged(s.Add,r,t),u):(u=n.prototype.splice.call(this,t,i),i==1?this._raiseCollectionChanged(s.Remove,u[0],t):this._raiseCollectionChanged(),u)},t.prototype.slice=function(t,i){return n.prototype.slice.call(this,t,i)},t.prototype.indexOf=function(t,i){return n.prototype.indexOf.call(this,t,i)},t.prototype.sort=function(t){var i=n.prototype.sort.call(this,t);return this._raiseCollectionChanged(),i},t.prototype.insert=function(n,t){this.splice(n,0,t)},t.prototype.remove=function(n){var t=this.indexOf(n);return t>-1?(this.removeAt(t),!0):!1},t.prototype.removeAt=function(n){this.splice(n,1)},t.prototype.setAt=function(n,t){n>this.length&&(this.length=n);this.splice(n,1,t)},t.prototype.clear=function(){this.length!==0&&(this.splice(0,this.length),this._raiseCollectionChanged())},t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(){this._updating>0&&(this._updating--,this._updating==0&&this._raiseCollectionChanged())},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(n){try{this.beginUpdate();n()}finally{this.endUpdate()}},t.prototype.implementsInterface=function(n){return n=='INotifyCollectionChanged'},t.prototype.onCollectionChanged=function(n){n===void 0&&(n=d.reset);this.isUpdating||this.collectionChanged.raise(this,n)},t.prototype._raiseCollectionChanged=function(n,t,i){if(n===void 0&&(n=s.Reset),!this.isUpdating){var r=new d(n,t,i);this.onCollectionChanged(r)}},t}(oi);t.ObservableArray=it;ti=function(){function n(n,t){var i=this;this._idx=-1;this._srtDsc=new it;this._grpDesc=new it;this._newItem=null;this._edtItem=null;this._pgSz=0;this._pgIdx=0;this._updating=0;this._stableSort=!1;this._canFilter=!0;this._canGroup=!0;this._canSort=!0;this._canAddNew=!0;this._canCancelEdit=!0;this._canRemove=!0;this._canChangePage=!0;this._trackChanges=!1;this._chgAdded=new it;this._chgRemoved=new it;this._chgEdited=new it;this.collectionChanged=new h;this.sourceCollectionChanging=new h;this.sourceCollectionChanged=new h;this.currentChanged=new h;this.currentChanging=new h;this.pageChanged=new h;this.pageChanging=new h;this._srtDsc.collectionChanged.addHandler(function(){for(var t=i._srtDsc,n=0;n<t.length;n++)r(t[n]instanceof fi,'sortDescriptions array must contain SortDescription objects.');i.canSort&&i.refresh()});this._grpDesc.collectionChanged.addHandler(function(){for(var t=i._grpDesc,n=0;n<t.length;n++)r(t[n]instanceof ei,'groupDescriptions array must contain GroupDescription objects.');i.canGroup&&i.refresh()});this.sourceCollection=n?n:new it;t&&(this.beginUpdate(),st(this,t),this.endUpdate())}return n.prototype._copy=function(n,t){var u,r,i;if(n=='sortDescriptions'){for(this.sortDescriptions.clear(),u=wt(t),r=0;r<u.length;r++)i=u[r],o(i)&&(i=new fi(i,!0)),this.sortDescriptions.push(i);return!0}if(n=='groupDescriptions'){for(this.groupDescriptions.clear(),u=wt(t),r=0;r<u.length;r++)i=u[r],o(i)&&(i=new di(i)),this.groupDescriptions.push(i);return!0}return!1},Object.defineProperty(n.prototype,"newItemCreator",{get:function(){return this._itemCreator},set:function(n){this._itemCreator=w(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(n){n!=this._srtCvt&&(this._srtCvt=w(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortComparer",{get:function(){return this._srtCmp},set:function(n){n!=this._srtCmp&&(this._srtCmp=w(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useStableSort",{get:function(){return this._stableSort},set:function(n){this._stableSort=l(n)},enumerable:!0,configurable:!0}),n.prototype.getAggregate=function(n,t,i){var r=i?this._pgView:this._view;return bi(n,r,t)},Object.defineProperty(n.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(n){this._trackChanges=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsAdded",{get:function(){return this._chgAdded},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsRemoved",{get:function(){return this._chgRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsEdited",{get:function(){return this._chgEdited},enumerable:!0,configurable:!0}),n.prototype.clearChanges=function(){this._chgAdded.clear();this._chgRemoved.clear();this._chgEdited.clear()},n.prototype.implementsInterface=function(n){switch(n){case'ICollectionView':case'IEditableCollectionView':case'IPagedCollectionView':case'INotifyCollectionChanged':return!0}return!1},Object.defineProperty(n.prototype,"getError",{get:function(){return this._getError},set:function(n){this._getError=w(n)},enumerable:!0,configurable:!0}),n.prototype.onCollectionChanged=function(n){n===void 0&&(n=d.reset);n.action!=s.Change||this._committing||this._canceling||n.item==this.currentEditItem||n.item==this.currentAddItem||this._trackItemChanged(n.item);this.collectionChanged.raise(this,n)},n.prototype._raiseCollectionChanged=function(n,t,i){n===void 0&&(n=s.Reset);var r=new d(n,t,i);this.onCollectionChanged(r)},n.prototype.onSourceCollectionChanging=function(n){return this.sourceCollectionChanging.raise(this,n),!n.cancel},n.prototype.onSourceCollectionChanged=function(n){this.sourceCollectionChanged.raise(this,n)},Object.defineProperty(n.prototype,"canFilter",{get:function(){return this._canFilter},set:function(n){this._canFilter=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canGroup",{get:function(){return this._canGroup},set:function(n){this._canGroup=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canSort",{get:function(){return this._canSort},set:function(n){this._canSort=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentItem",{get:function(){return this._pgView&&this._idx>-1&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(n){this.moveCurrentTo(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPosition",{get:function(){return this._idx},set:function(n){this.moveCurrentToPosition(u(n))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filter",{get:function(){return this._filter},set:function(n){this._filter!=n&&(this._filter=w(n),this.canFilter&&this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupDescriptions",{get:function(){return this._grpDesc},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return!this._pgView||!this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortDescriptions",{get:function(){return this._srtDsc},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sourceCollection",{get:function(){return this._src},set:function(n){if(n!=this._src){if(!this.onSourceCollectionChanging(new ot))return;var t=this.currentPosition;this.commitEdit();this.commitNew();this._ncc!=null&&this._ncc.collectionChanged.removeHandler(this._sourceChanged);this._src=wt(n,!1);this._ncc=vt(this._src,'INotifyCollectionChanged');this._ncc&&this._ncc.collectionChanged.addHandler(this._sourceChanged,this);this.clearChanges();this.refresh();this.moveCurrentToFirst();this.onSourceCollectionChanged();this.currentPosition<0&&t>-1&&this.onCurrentChanged()}},enumerable:!0,configurable:!0}),n.prototype._sourceChanged=function(){this._updating<=0&&this.refresh()},n.prototype.contains=function(n){return this._pgView.indexOf(n)>-1},n.prototype.moveCurrentTo=function(n){return this.moveCurrentToPosition(this._pgView.indexOf(n))},n.prototype.moveCurrentToFirst=function(){return this.moveCurrentToPosition(0)},n.prototype.moveCurrentToLast=function(){return this.moveCurrentToPosition(this._pgView.length-1)},n.prototype.moveCurrentToPrevious=function(){return this._idx>0?this.moveCurrentToPosition(this._idx-1):!1},n.prototype.moveCurrentToNext=function(){return this.moveCurrentToPosition(this._idx+1)},n.prototype.moveCurrentToPosition=function(n){var i,t;return n>=-1&&n<this._pgView.length&&n!=this._idx&&(i=new ot,this.onCurrentChanging(i)&&(t=this._pgView[n],this._edtItem&&t!=this._edtItem&&this.commitEdit(),this._newItem&&t!=this._newItem&&this.commitNew(),this._idx=n,this.onCurrentChanged())),this._idx==n},n.prototype.refresh=function(){this._updating>0||this._newItem||this._edtItem||(this._performRefresh(),this.onCollectionChanged())},n.prototype._performRefresh=function(){var t,n;this._updating>0||(t=this.currentItem,this._view=this._src?this._filter&&this.canFilter?this._performFilter(this._src):this._srtDsc.length>0&&this.canSort?this._src.slice(0):this._src:[],this.canSort&&this._srtDsc.length>0&&this._performSort(this._view),this._groups=this.canGroup?this._createGroups(this._view):null,this._fullGroups=this._groups,this._groups&&(this._view=this._mergeGroupItems(this._groups)),this._pgIdx=e(this._pgIdx,0,this.pageCount-1),this._pgView=this._getPageView(),this._groups&&this.pageCount>1&&(this._groups=this._createGroups(this._pgView),this._mergeGroupItems(this._groups)),n=this._pgView.indexOf(t),n<0&&(n=Math.min(this._idx,this._pgView.length-1)),this._idx=n,this._digest=this._getGroupsDigest(this.groups),this.currentItem!==t&&this.onCurrentChanged())},n.prototype._performSort=function(n){var i,r,t;if(this._stableSort)for(i=n.map(function(n,t){return{item:n,index:t}}),r=this._compareItems(),i.sort(function(n,t){var i=r(n.item,t.item);return i==0?n.index-t.index:i}),t=0;t<n.length;t++)n[t]=i[t].item;else n.sort(this._compareItems())},n.prototype._compareItems=function(){var i=this._srtDsc,t=this._srtCvt,r=this._srtCmp,u=!0,n=0;return function(f,e){for(var l,a,c=0;c<i.length;c++){var h=i[c],o=h._bnd.getValue(f),s=h._bnd.getValue(e);if(t&&(o=t(h,f,o,u),s=t(h,e,s,!1),u=!1),r&&(n=r(o,s),n!=null))return h.ascending?+n:-n;if(o!==o&&(o=null),s!==s&&(s=null),typeof o=='string'&&typeof s=='string'&&(l=o.toLowerCase(),a=s.toLowerCase(),l!=a&&(o=l,s=a)),o!=null&&s==null)return-1;if(o==null&&s!=null)return 1;if(n=o<s?-1:o>s?1:0,n!=0)return h.ascending?+n:-n}return 0}},n.prototype._performFilter=function(n){return this.canFilter&&this._filter?n.filter(this._filter,this):n},n.prototype.onCurrentChanged=function(n){n===void 0&&(n=k.empty);this.currentChanged.raise(this,n)},n.prototype.onCurrentChanging=function(n){return this.currentChanging.raise(this,n),!n.cancel},Object.defineProperty(n.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),n.prototype.beginUpdate=function(){this._updating++},n.prototype.endUpdate=function(){this._updating--;this._updating<=0&&this.refresh()},Object.defineProperty(n.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),n.prototype.deferUpdate=function(n){try{this.beginUpdate();n()}finally{this.endUpdate()}},Object.defineProperty(n.prototype,"canAddNew",{get:function(){return this._canAddNew},set:function(n){this._canAddNew=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canCancelEdit",{get:function(){return this._canCancelEdit},set:function(n){this._canCancelEdit=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canRemove",{get:function(){return this._canRemove},set:function(n){this._canRemove=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentAddItem",{get:function(){return this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentEditItem",{get:function(){return this._edtItem},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAddingNew",{get:function(){return this._newItem!=null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEditingItem",{get:function(){return this._edtItem!=null},enumerable:!0,configurable:!0}),n.prototype.editItem=function(n){n!=this._edtItem&&this.moveCurrentTo(n)&&(this.commitEdit(),this._edtItem=n,this._edtClone={},this._extend(this._edtClone,this._edtItem))},n.prototype.commitEdit=function(){var n=this._edtItem,i,t,r;n!=null&&(this._committing=!0,i=this._sameContent(n,this._edtClone),this._edtItem=null,this._edtClone=null,t=this._pgView.indexOf(n),r=this._digest,this._performRefresh(),i||this._trackItemChanged(n),this._pgView.indexOf(n)==t&&r==this._digest?this._raiseCollectionChanged(s.Change,n,t):this._raiseCollectionChanged(),this._committing=!1)},n.prototype.cancelEdit=function(){var t=this._edtItem,n;if(t!=null){if(this._edtItem=null,!this.canCancelEdit){r(!1,'cannot cancel edits (canCancelEdit == false).');return}if(n=this._src.indexOf(t),n<0||!this._edtClone)return;this._extend(this._src[n],this._edtClone);this._edtClone=null;this._canceling=!0;this._raiseCollectionChanged(s.Change,t,n);this._canceling=!1}},n.prototype.addNew=function(){var n,i,t;if(arguments.length>0&&r(!1,'addNew does not take any parameters, it creates the new items.'),this.commitEdit(),this.commitNew(),!this.canAddNew)return r(!1,'cannot add items (canAddNew == false).'),null;if(n=null,i=this.sourceCollection,n=this.newItemCreator?this.newItemCreator():i&&i.length?new i[0].constructor:{},n!=null){if(this._newItem=n,this._updating++,this._src.push(n),this._updating--,this._pgView!=this._src&&this._pgView.push(n),this.groups&&this.groups.length)for(t=this.groups[this.groups.length-1],t.items.push(n);t.groups&&t.groups.length;)t=t.groups[t.groups.length-1],t.items.push(n);this._raiseCollectionChanged(s.Add,n,this._pgView.length-1);this.moveCurrentTo(n)}return this._newItem},n.prototype.commitNew=function(){var n=this._newItem,t,r,i;n!=null&&(this._newItem=null,t=this._pgView.indexOf(n),r=this._digest,this._performRefresh(),this._trackChanges&&(i=this._chgEdited.indexOf(n),i>-1&&this._chgEdited.removeAt(i),this._chgAdded.indexOf(n)<0&&this._chgAdded.push(n)),this._pgView.indexOf(n)==t&&r==this._digest?this._raiseCollectionChanged(s.Change,n,t):this._raiseCollectionChanged())},n.prototype.cancelNew=function(){var n=this._newItem;n!=null&&this.remove(n)},n.prototype.remove=function(n){var f=n==this._newItem,t,e,o,i,u,h,c,l;if(f&&(this._newItem=null),n==this._edtItem&&this.cancelEdit(),!this.canRemove){r(!1,'cannot remove items (canRemove == false).');return}t=this._src.indexOf(n);t>-1&&(e=this.currentItem,this._updating++,this._src.splice(t,1),this._updating--,o=this._digest,this._performRefresh(),this._trackChanges&&(i=this._chgAdded.indexOf(n),i>-1&&this._chgAdded.removeAt(i),u=this._chgEdited.indexOf(n),u>-1&&this._chgEdited.removeAt(u),h=this._chgRemoved.indexOf(n),h<0&&!f&&i<0&&this._chgRemoved.push(n)),c=this.sortDescriptions.length>0,l=this.pageSize>0&&this._pgIdx>-1,c||l||o!=this._getGroupsDigest(this.groups)?this._raiseCollectionChanged():this._raiseCollectionChanged(s.Remove,n,t),this.currentItem!==e&&this.onCurrentChanged())},n.prototype.removeAt=function(n){n=pt(n);this.remove(this._pgView[n])},n.prototype._trackItemChanged=function(n){var r,t,u,i;if(this._trackChanges&&(r=this.sourceCollection,r&&r.indexOf(n)>-1))if(t=this._chgEdited.indexOf(n),u=s.Change,t<0&&this._chgAdded.indexOf(n)<0)this._chgEdited.push(n);else if(t>-1){i=new d(u,n,t);this._chgEdited.onCollectionChanged(i)}else if(t=this._chgAdded.indexOf(n),t>-1){i=new d(u,n,t);this._chgAdded.onCollectionChanged(i)}},n.prototype._extend=function(n,t){for(var i in t)n[i]=t[i]},n.prototype._sameContent=function(n,t){for(var i in t)if(!this._sameValue(n[i],t[i]))return!1;for(i in n)if(!this._sameValue(n[i],t[i]))return!1;return!0},n.prototype._sameValue=function(n,t){return n===t||lt.equals(n,t)},Object.defineProperty(n.prototype,"canChangePage",{get:function(){return this._canChangePage},set:function(n){this._canChangePage=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPageChanging",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemCount",{get:function(){return this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageIndex",{get:function(){return this._pgIdx},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageSize",{get:function(){return this._pgSz},set:function(n){n!=this._pgSz&&(this._pgSz=pt(n),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalItemCount",{get:function(){return this._view.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageCount",{get:function(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1},enumerable:!0,configurable:!0}),n.prototype.moveToFirstPage=function(){return this.moveToPage(0)},n.prototype.moveToLastPage=function(){return this.moveToPage(this.pageCount-1)},n.prototype.moveToPreviousPage=function(){return this.moveToPage(this.pageIndex-1)},n.prototype.moveToNextPage=function(){return this.moveToPage(this.pageIndex+1)},n.prototype.moveToPage=function(n){var t=e(n,0,this.pageCount-1),i;return t!=this._pgIdx&&(this.canChangePage||r(!1,'cannot change pages (canChangePage == false).'),i=new ki(t),this.onPageChanging(i)&&(this._pgIdx=t,this._pgView=this._getPageView(),this._idx=0,this.groupDescriptions&&this.groupDescriptions.length!=0?this.refresh():this.onCollectionChanged(),this.onPageChanged())),this._pgIdx==n},n.prototype.onPageChanged=function(n){n===void 0&&(n=k.empty);this.pageChanged.raise(this,n)},n.prototype.onPageChanging=function(n){return this.pageChanging.raise(this,n),!n.cancel},n.prototype._getFullGroup=function(n){var t=this._getGroupByPath(this._fullGroups,n.level,n._path);return t!=null&&(n=t),n},n.prototype._getGroupByPath=function(n,t,i){for(var r,u=0;u<n.length;u++)if((r=n[u],r.level==t&&r._path==i)||r.level<t&&i.indexOf(r._path)==0&&(r=this._getGroupByPath(r.groups,t,i),r!=null))return r;return null},n.prototype._getPageView=function(){if(this.pageSize<=0||this._pgIdx<0)return this._view;var n=this._pgSz*this._pgIdx,t=Math.min(n+this._pgSz,this._view.length);return this._view.slice(n,t)},n.prototype._createGroups=function(n){var r,t,f;if(!this._grpDesc||!this._grpDesc.length)return null;var o=[],s={},i=null;for(r=0;r<n.length;r++){var h=n[r],c=o,l=this._grpDesc.length,u='';for(t=0;t<l;t++){var a=this._grpDesc[t],e=a.groupNameFromItem(h,t),v=t==l-1;i=s[u];!i&&li(e)&&(i={},s[u]=i);f=this._getGroup(a,c,i,e,t,v);u+='/'+e;f._path=u;v&&f.items.push(h);c=f.groups}}return o},n.prototype._getGroupsDigest=function(n){for(var t,i='',r=0;n!=null&&r<n.length;r++)t=n[r],i+='{'+t.name+':'+(t.items?t.items.length:'*'),t.groups.length>0&&(i+=',',i+=this._getGroupsDigest(t.groups)),i+='}';return i},n.prototype._mergeGroupItems=function(n){for(var i,f,t,r,e=[],u=0;u<n.length;u++){if(i=n[u],!i._isBottomLevel)for(f=this._mergeGroupItems(i.groups),t=0,r=f.length;t<r;t++)i._items.push(f[t]);for(t=0,r=i._items.length;t<r;t++)e.push(i._items[t])}return e},n.prototype._getGroup=function(n,t,i,r,u,f){var s,e,o;if(i&&li(r)){if(s=i[r],s)return s}else for(e=0;e<t.length;e++)if(n.namesMatch(t[e].name,r))return t[e];return o=new gi(n,r,u,f),t.push(o),i&&(i[r]=o),o},n}();t.CollectionView=ti;gi=function(){function n(n,t,i,r){this._gd=n;this._name=t;this._level=i;this._isBottomLevel=r;this._groups=[];this._items=[]}return Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBottomLevel",{get:function(){return this._isBottomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupDescription",{get:function(){return this._gd},enumerable:!0,configurable:!0}),n.prototype.getAggregate=function(n,t,i){var r=vt(i,ti),u=r?r._getFullGroup(this):this;return bi(n,u.items,t)},n}();t.CollectionViewGroup=gi;iu=function(){function n(n){this._showAutoTipBnd=this._showAutoTip.bind(this);this._hideAutoTipBnd=this._hideAutoTip.bind(this);this._html=!0;this._gap=6;this._showAtMouse=!1;this._showDelay=500;this._hideDelay=0;this._tips=[];this.popup=new h;st(this,n)}return n.prototype.setTooltip=function(n,t){n=ft(n);t=this._getContent(t);var i=this._indexOf(n);i>-1&&(this._detach(n),this._tips.splice(i,1));t&&(this._attach(n),this._tips.push({element:n,content:t}))},n.prototype.getTooltip=function(n){var i,t;for(n=ft(n),i=this._tips,t=0;t<i.length;t++)if(i[t].element==n)return i[t].content;return null},n.prototype.show=function(t,i,r){var e=this,u,f;t=ft(t);i=this._getContent(i);r||(r=ct.fromBoundingRect(t.getBoundingClientRect()));u=n._eTip;u||(u=n._eTip=document.createElement('div'),kt(u,'wj-tooltip'),u.style.visibility='none');this._setContent(i);f=new nr(i);this.onPopup(f);f.content&&!f.cancel&&(document.body.appendChild(u),this._setContent(f.content),u.style.minWidth='',r=new ct(r.left-(u.offsetWidth-r.width)/2,r.top-this.gap,u.offsetWidth,r.height+2*this.gap),uu(u,r,!0),document.addEventListener('mousedown',function(n){n.defaultPrevented||e._hideAutoTip()}))},n.prototype.hide=function(){var t=n._eTip;t&&(t.parentElement&&t.parentElement.removeChild(t),t.innerHTML='');document.removeEventListener('mousedown',this._hideAutoTipBnd)},n.prototype.dispose=function(){var n=this;this._tips.forEach(function(t){n._detach(t.element)});this._tips.splice(0,this._tips.length)},Object.defineProperty(n.prototype,"isVisible",{get:function(){return n._eTip&&n._eTip.style.visibility!='hidden'},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isContentHtml",{get:function(){return this._html},set:function(n){this._html=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gap",{get:function(){return this._gap},set:function(n){this._gap=u(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showAtMouse",{get:function(){return this._showAtMouse},set:function(n){this._showAtMouse=l(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showDelay",{get:function(){return this._showDelay},set:function(n){this._showDelay=pt(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hideDelay",{get:function(){return this._hideDelay},set:function(n){this._hideDelay=pt(n)},enumerable:!0,configurable:!0}),n.prototype.onPopup=function(n){return this.popup&&this.popup.raise(this,n),!n.cancel},n.prototype._indexOf=function(n){for(var t=0;t<this._tips.length;t++)if(this._tips[t].element==n)return t;return-1},n.prototype._attach=function(n){n.addEventListener('mouseenter',this._showAutoTipBnd);n.addEventListener('mouseleave',this._hideAutoTipBnd);n.addEventListener('click',this._showAutoTipBnd)},n.prototype._detach=function(n){n.removeEventListener('mouseenter',this._showAutoTipBnd);n.removeEventListener('mouseleave',this._hideAutoTipBnd);n.removeEventListener('click',this._showAutoTipBnd)},n.prototype._showAutoTip=function(n){var t=this,i;if(!n.defaultPrevented){if(n.type=='click'&&!f._touching){this._hideAutoTip();return}i=n.type=='mouseenter'?this._showDelay:0;this._clearTimeouts();this._toShow=setTimeout(function(){var r=t._indexOf(n.target),i,u;r>-1&&(i=t._tips[r],u=t._showAtMouse?new ct(n.clientX,n.clientY,0,0):null,t.show(i.element,i.content,u),t._hideDelay>0&&(t._toHide=setTimeout(function(){t.hide()},t._hideDelay)))},i)}},n.prototype._hideAutoTip=function(){this._clearTimeouts();this.hide()},n.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null);this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},n.prototype._getContent=function(n){if(n=p(n),n&&n[0]=='#'){var t=ft(n);t&&(n=t.innerHTML)}return n},n.prototype._setContent=function(t){var i=n._eTip;i&&(this.isContentHtml?i.innerHTML=t:i.textContent=t)},n}();t.Tooltip=iu;ef=function(){function n(){}return n}();nr=function(n){function t(t){var i=n.call(this)||this;return i._content=p(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(n){this._content=p(n)},enumerable:!0,configurable:!0}),t}(ot);t.TooltipEventArgs=nr;tr=function(){function n(n){this._r=0;this._g=0;this._b=0;this._a=1;n&&this._parse(n)}return Object.defineProperty(n.prototype,"r",{get:function(){return this._r},set:function(n){this._r=e(u(n),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"g",{get:function(){return this._g},set:function(n){this._g=e(u(n),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"b",{get:function(){return this._b},set:function(n){this._b=e(u(n),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"a",{get:function(){return this._a},set:function(n){this._a=e(u(n),0,1)},enumerable:!0,configurable:!0}),n.prototype.equals=function(t){return t instanceof n&&this.r==t.r&&this.g==t.g&&this.b==t.b&&this.a==t.a},n.prototype.toString=function(){var n=Math.round(this.a*100);return n>99?'#'+(16777216+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1):'rgba('+this.r+','+this.g+','+this.b+','+n/100+')'},n.fromRgba=function(t,i,r,f){f===void 0&&(f=1);var o=new n(null);return o.r=Math.round(e(u(t),0,255)),o.g=Math.round(e(u(i),0,255)),o.b=Math.round(e(u(r),0,255)),o.a=e(u(f),0,1),o},n.fromHsb=function(t,i,r,f){f===void 0&&(f=1);var o=n._hsbToRgb(e(u(t),0,1),e(u(i),0,1),e(u(r),0,1));return n.fromRgba(o[0],o[1],o[2],f)},n.fromHsl=function(t,i,r,f){f===void 0&&(f=1);var o=n._hslToRgb(e(u(t),0,1),e(u(i),0,1),e(u(r),0,1));return n.fromRgba(o[0],o[1],o[2],f)},n.fromString=function(t){var i=new n(null);return i._parse(p(t))?i:null},n.prototype.getHsb=function(){return n._rgbToHsb(this.r,this.g,this.b)},n.prototype.getHsl=function(){return n._rgbToHsl(this.r,this.g,this.b)},n.interpolate=function(t,i,r){r=e(u(r),0,1);var o=n._rgbToHsl(t.r,t.g,t.b),s=n._rgbToHsl(i.r,i.g,i.b),f=1-r,l=t.a*f+i.a*r,h=[o[0]*f+s[0]*r,o[1]*f+s[1]*r,o[2]*f+s[2]*r],c=n._hslToRgb(h[0],h[1],h[2]);return n.fromRgba(c[0],c[1],c[2],l)},n.toOpaque=function(t,i){if(t=o(t)?n.fromString(t):bt(t,n),t.a==1)return t;i=i==null?n.fromRgba(255,255,255,1):o(i)?n.fromString(i):bt(i,n);var r=t.a,u=1-r;return n.fromRgba(t.r*r+i.r*u,t.g*r+i.g*u,t.b*r+i.b*u)},n.prototype._parse=function(t){var u,f,r,e,i,o;if(t=t.toLowerCase(),t=='transparent')return this._r=this._g=this._b=this._a=0,!0;if(t&&t.indexOf('#')!=0&&t.indexOf('rgb')!=0&&t.indexOf('hsl')!=0&&(u=document.createElement('div'),u.style.color=t,f=u.style.color,f==t&&(f=window.getComputedStyle(u).color,f||(document.body.appendChild(u),f=window.getComputedStyle(u).color,document.body.removeChild(u))),t=f.toLowerCase()),t.indexOf('#')==0)return t.length==4?(this.r=parseInt(t[1]+t[1],16),this.g=parseInt(t[2]+t[2],16),this.b=parseInt(t[3]+t[3],16),this.a=1,!0):t.length==7?(this.r=parseInt(t.substr(1,2),16),this.g=parseInt(t.substr(3,2),16),this.b=parseInt(t.substr(5,2),16),this.a=1,!0):!1;if(t.indexOf('rgb')==0&&(r=t.indexOf('('),e=t.indexOf(')'),r>-1&&e>-1&&(i=t.substr(r+1,e-(r+1)).split(','),i.length>2)))return this.r=parseInt(i[0]),this.g=parseInt(i[1]),this.b=parseInt(i[2]),this.a=i.length>3?parseFloat(i[3]):1,!0;if(t.indexOf('hsl')==0&&(r=t.indexOf('('),e=t.indexOf(')'),r>-1&&e>-1&&(i=t.substr(r+1,e-(r+1)).split(','),i.length>2))){var c=parseInt(i[0])/360,s=parseInt(i[1]),h=parseInt(i[2]);return i[1].indexOf('%')>-1&&(s/=100),i[2].indexOf('%')>-1&&(h/=100),o=n._hslToRgb(c,s,h),this.r=o[0],this.g=o[1],this.b=o[2],this.a=i.length>3?parseFloat(i[3]):1,!0}return!1},n._hslToRgb=function(t,i,u){var o,s,h,f,e;return r(t>=0&&t<=1&&i>=0&&i<=1&&u>=0&&u<=1,'bad HSL values'),i==0?o=s=h=u:(f=u<.5?u*(1+i):u+i-u*i,e=2*u-f,o=n._hue2rgb(e,f,t+1/3),s=n._hue2rgb(e,f,t),h=n._hue2rgb(e,f,t-1/3)),[Math.round(o*255),Math.round(s*255),Math.round(h*255)]},n._hue2rgb=function(n,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?n+(t-n)*6*i:i<1/2?t:i<2/3?n+(t-n)*(2/3-i)*6:n},n._rgbToHsl=function(n,t,i){var e;r(n>=0&&n<=255&&t>=0&&t<=255&&i>=0&&i<=255,'bad RGB values');n/=255;t/=255;i/=255;var u=Math.max(n,t,i),o=Math.min(n,t,i),f,s,h=(u+o)/2;if(u==o)f=s=0;else{e=u-o;s=h>.5?e/(2-u-o):e/(u+o);switch(u){case n:f=(t-i)/e+(t<i?6:0);break;case t:f=(i-n)/e+2;break;case i:f=(n-t)/e+4}f/=6}return[f,s,h]},n._rgbToHsb=function(t,i,u){r(t>=0&&t<=255&&i>=0&&i<=255&&u>=0&&u<=255,'bad RGB values');var f=n._rgbToHsl(t,i,u);return n._hslToHsb(f[0],f[1],f[2])},n._hsbToRgb=function(t,i,r){var u=n._hsbToHsl(t,i,r);return n._hslToRgb(u[0],u[1],u[2])},n._hsbToHsl=function(n,t,i){r(n>=0&&n<=1&&t>=0&&t<=1&&i>=0&&i<=1,'bad HSB values');var u=e(i*(2-t)/2,0,1),f=1-Math.abs(2*u-1),o=e(f>0?i*t/f:t,0,1);return r(!isNaN(u)&&!isNaN(o),'bad conversion to HSL'),[n,o,u]},n._hslToHsb=function(n,t,i){r(n>=0&&n<=1&&t>=0&&t<=1&&i>=0&&i<=1,'bad HSL values');var u=e(i==1?1:(2*i+t*(1-Math.abs(2*i-1)))/2,0,1),f=e(u>0?2*(u-i)/u:t,0,1);return r(!isNaN(u)&&!isNaN(f),'bad conversion to HSB'),[n,f,u]},n}();t.Color=tr;ru=function(){function n(){}return n.copy=function(t){n._copyPasteInternal(t)},n.paste=function(t){n._copyPasteInternal(t)},n._copyPasteInternal=function(n){for(var r=dt(),t=nt(r,'.wj-control'),i;t&&f.getControl(t);)t=t.parentElement;t==null&&(t=document.body);t&&(i=document.createElement('textarea'),i.style.position='fixed',i.style.opacity='0',t.appendChild(i),o(n)&&(i.value=n),i.select(),i.onkeydown=function(n){n.preventDefault()},setTimeout(function(){r.focus();var u=i.value;t.removeChild(i);rt(n)&&n(u)},100))},n}();t.Clipboard=ru;t.showPopup=uu;t.hidePopup=of;fu=function(){function n(n){this._copyCss=!0;n!=null&&st(this,n)}return Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(n){this._title=p(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"copyCss",{get:function(){return this._copyCss},set:function(n){this._copyCss=l(n)},enumerable:!0,configurable:!0}),n.prototype.addCSS=function(n){this._css||(this._css=[]);this._css.push(n)},n.prototype.append=function(n){var t=this._getDocument(),i;o(n)?t.write(n):n instanceof Node&&t.body?(i=this._cloneNode(n),t.body.appendChild(i)):n instanceof HTMLElement?t.write(n.outerHTML):r(!1,'child parameter should be an HTML node or an HTML string.')},n.prototype.print=function(){var n=this;this._iframe&&(this._close(),setTimeout(function(){var t=n._iframe.contentWindow,i='onafterprint'in t&&!rr();i&&(t.onafterprint=function(){document.body.removeChild(n._iframe);n._iframe=null});t.focus();t.print();i||(document.body.removeChild(n._iframe),n._iframe=null)},100))},n.prototype._cloneNode=function(n){var t=n.cloneNode(!0),i;return n instanceof HTMLElement&&t instanceof HTMLElement&&(i=['select','textarea'],i.forEach(function(i){for(var u=n.querySelectorAll(i),f=t.querySelectorAll(i),r=0;r<u.length;r++)f[r].value=u[r].value})),t},n.prototype._getDocument=function(){if(!this._iframe){this._iframe=document.createElement('iframe');kt(this._iframe,'wj-printdocument');et(this._iframe,{position:'fixed',left:1e4,top:1e4});document.body.appendChild(this._iframe);var n=this._iframe.contentDocument;n.write('<body style="position:static"/>')}return this._iframe.contentDocument},n.prototype._close=function(){var t=this._getDocument(),u,i,f,n,e,r;if(t.close(),t.title=this.title!=null?this.title:document.title,t.title.match(/\s*/)&&(t.title='\u00A0'),this._copyCss){for(u=document.head.querySelectorAll('link'),n=0;n<u.length;n++)i=u[n],i.href.match(/\.css$/i)&&i.rel.match(/stylesheet/i)&&(r=wi(i.href,{async:!1}),this._addStyle(r.responseText));for(f=document.head.querySelectorAll('STYLE'),n=0;n<f.length;n++)this._addStyle(f[n].textContent)}if(this._css)for(n=0;n<this._css.length;n++)e=t.createElement('style'),r=wi(this._css[n],{async:!1}),e.textContent=r.responseText,t.head.appendChild(e)},n.prototype._addStyle=function(n){var t=this._getDocument(),i=t.createElement('style');i.textContent=n;t.head.appendChild(i)},n}();t.PrintDocument=fu;ii=function(){function n(n,t,i){t===void 0&&(t=null);i===void 0&&(i='_');this._promptChar='_';this._mskArr=[];this._full=!0;this._hbInput=this._input.bind(this);this._hbKeyDown=this._keydown.bind(this);this._hbKeyPress=this._keypress.bind(this);this._hbCompositionStart=this._compositionstart.bind(this);this._hbCompositionEnd=this._compositionend.bind(this);this.mask=t;this.input=n;this.promptChar=i;this._connect(!0)}return Object.defineProperty(n.prototype,"input",{get:function(){return this._tbx},set:function(n){this._connect(!1);this._tbx=n;this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._msk},set:function(n){n!=this._msk&&(this._msk=p(n,!0),this._parseMask(),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptChar",{get:function(){return this._promptChar},set:function(n){n!=this._promptChar&&(this._promptChar=p(n,!1),r(this._promptChar.length==1,'promptChar must be a string with length 1.'),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maskFull",{get:function(){return this._full},enumerable:!0,configurable:!0}),n.prototype.getMaskRange=function(){return this._mskArr.length?[this._firstPos,this._lastPos]:[0,this._tbx.value.length-1]},n.prototype.getRawValue=function(){var t=this._tbx.value,i='',n;if(!this.mask)return t;for(n=0;n<this._mskArr.length&&n<t.length;n++)this._mskArr[n].literal||t[n]==this._promptChar||(i+=t[n]);return i},n.prototype.refresh=function(){this._parseMask();this._valueChanged()},n.prototype._input=function(){var n=this;this._composing||setTimeout(function(){n._valueChanged()})},n.prototype._keydown=function(n){if(n.keyCode==ci.Back){var t=this._tbx.selectionStart,i=this._tbx.selectionEnd;if(t<=this._firstPos&&i==t){n.preventDefault();this._backSpace=!1;return}}this._backSpace=n.keyCode==ci.Back},n.prototype._keypress=function(n){n.ctrlKey||n.metaKey||n.altKey||this._composing||!this._preventKey(n.charCode)||n.preventDefault()},n.prototype._compositionstart=function(){this._composing=!0},n.prototype._compositionend=function(){var n=this;this._composing&&(this._composing=!1,setTimeout(function(){n._valueChanged()}))},n.prototype._preventKey=function(n){var i;if(n&&this._mskArr.length){var r=this._tbx,t=r.selectionStart,u=String.fromCharCode(n);if(t<this._firstPos&&(t=this._firstPos,vi(r,t)),t>=this._mskArr.length)return!0;if(i=this._mskArr[t],i.literal)this._validatePosition(t);else if(i.wildCard!=u&&!this._isCharValid(i.wildCard,u))return!0}return!1},n.prototype._connect=function(n){var t=this._tbx;t&&(n?(this._autoComplete=t.autocomplete,this._spellCheck=t.spellcheck,t.autocomplete='off',t.spellcheck=!1,t.addEventListener('input',this._hbInput),t.addEventListener('keydown',this._hbKeyDown,!0),t.addEventListener('keypress',this._hbKeyPress,!0),t.addEventListener('compositionstart',this._hbCompositionStart,!0),t.addEventListener('compositionend',this._hbCompositionEnd,!0),t.addEventListener('blur',this._hbCompositionEnd,!0),this._valueChanged()):(t.autocomplete=this._autoComplete,t.spellcheck=this._spellCheck,t.removeEventListener('input',this._hbInput),t.removeEventListener('keydown',this._hbKeyDown,!0),t.removeEventListener('keypress',this._hbKeyPress,!0),t.removeEventListener('compositionstart',this._hbCompositionStart,!0),t.removeEventListener('compositionend',this._hbCompositionEnd,!0),t.removeEventListener('blur',this._hbCompositionEnd,!0)))},n.prototype._valueChanged=function(){var i;if(this._tbx&&this._msk){var t=this._tbx,r=t.value.length<2,n=t.selectionStart,u=n>0?t.value[n-1]:'';t.value=this._applyMask();r&&(n=this._firstPos+1);i=n>0?t.value[n-1]:'';n>0&&i==this._promptChar&&u!=this.promptChar&&n--;this._validatePosition(n)}},n.prototype._applyMask=function(){var t,e,r,f,u,n,i;if((this._full=!0,t=this._tbx.value,!this._msk)||!t&&!this._tbx.required)return t;for(e='',r=0,t=this._handleVagueLiterals(t),f=0;f<this._mskArr.length;f++){if(u=this._mskArr[f],n=u.literal,n&&n==t[r]&&r++,u.wildCard){if(n=this._promptChar,t){for(i=r;i<t.length;i++)if(this._isCharValid(u.wildCard,t[i])){n=t[i];switch(u.charCase){case'>':n=n.toUpperCase();break;case'<':n=n.toLowerCase()}break}r=i+1}n==this._promptChar&&(this._full=!1)}e+=n}return e},n.prototype._handleVagueLiterals=function(n){var i,t,f,r,e,u;if(n.length>this._mskArr.length+1)return n;if(i=n.length-this._mskArr.length,i!=0&&n.length>1){for(t=-1,f=Math.max(0,this._tbx.selectionStart-i),r=f;r<this._mskArr.length;r++)if(this._mskArr[r].vague){t=r;break}if(t>-1)if(i<0)e=Array(1-i).join(this._promptChar),u=t+i,u>-1&&(n=n.substr(0,u)+e+n.substr(u));else{while(t>0&&this._mskArr[t-1].literal)t--;n=n.substr(0,t)+n.substr(t+i)}}return n},n.prototype._isCharValid=function(t,i){var r=this._promptChar;switch(t){case'0':return i>='0'&&i<='9'||i==r;case'9':return i>='0'&&i<='9'||i==' '||i==r;case'#':return i>='0'&&i<='9'||i==' '||i=='+'||i=='-'||i==r;case'L':return i>='a'&&i<='z'||i>='A'&&i<='Z'||i==r;case'l':return i>='a'&&i<='z'||i>='A'&&i<='Z'||i==' '||i==r;case'A':return i>='0'&&i<='9'||i>='a'&&i<='z'||i>='A'&&i<='Z'||i==r;case'a':return i>='0'&&i<='9'||i>='a'&&i<='z'||i>='A'&&i<='Z'||i==' '||i==r;case'\uff19':return i>='\uFF10'&&i<='\uff19'||i==r;case'\uff2a':case'\uff27':return t=='\uff27'&&n._X_DBCS_BIG_HIRA.indexOf(i)>-1?!1:i>='\u3041'&&i<='\u3096'||i==r;case'\uff2b':case'\uff2e':return t=='\uff2e'&&n._X_DBCS_BIG_KATA.indexOf(i)>-1?!1:i>='\u30a1'&&i<='\u30fa'||i==r;case'\uff3a':return i<='\u0021'||i>='\u00ff'||i==r;case'H':return i>='\u0021'&&i<='\u00ff'||i==r;case'K':case'N':return t=='N'&&n._X_SBCS_BIG_KATA.indexOf(i)>-1?!1:i>='\uff66'&&i<='\uff9f'||i==r}return!1},n.prototype._validatePosition=function(n){var t=this._mskArr;if(this._backSpace)while(n>0&&n<t.length&&t[n-1].literal)n--;if(n==0||!this._backSpace)while(n<t.length&&t[n].literal)n++;dt()==this._tbx&&vi(this._tbx,n);this._backSpace=!1},n.prototype._parseMask=function(){var i,e,u,n,f,r,o;for(this._mskArr=[],this._firstPos=-1,this._lastPos=-1,i=this._msk,e='|',n=0;i&&n<i.length;n++)switch(i[n]){case'0':case'9':case'#':case'A':case'a':case'L':case'l':case'\uff19':case'\uff2a':case'\uff27':case'\uff2b':case'\uff2e':case'\uff3a':case'K':case'N':case'H':this._firstPos<0&&(this._firstPos=this._mskArr.length);this._lastPos=this._mskArr.length;this._mskArr.push(new at(i[n],e));break;case'.':case',':case':':case'/':case'$':switch(i[n]){case'.':case',':u=t.culture.Globalize.numberFormat[i[n]];break;case':':case'/':u=t.culture.Globalize.calendar[i[n]];break;case'$':u=t.culture.Globalize.numberFormat.currency.symbol}for(r=0;r<u.length;r++)this._mskArr.push(new at(u[r]));break;case'<':case'>':case'|':e=i[n];break;case'\\':n<i.length-1&&n++;this._mskArr.push(new at(i[n]));break;default:this._mskArr.push(new at(i[n]))}for(n=0;n<this._mskArr.length;n++)if(f=this._mskArr[n],f.literal)for(r=0;r<n;r++)if(o=this._mskArr[r],o.wildCard&&this._isCharValid(o.wildCard,f.literal)){f.vague=!0;break}},n}();ii._X_DBCS_BIG_HIRA='\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096';ii._X_DBCS_BIG_KATA='\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6';ii._X_SBCS_BIG_KATA='\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f';t._MaskProvider=ii;at=function(){function n(n,t){t?(this.wildCard=n,this.charCase=t):this.literal=n}return n}();t._MaskElement=at;eu=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)!=null;t.isMobile=sf;ou=navigator.userAgent.match(/Firefox\//)!=null;t.isFirefox=rr;su=navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!=null;t.isSafari=hf;hu=navigator.userAgent.match(/MSIE |Trident\/|Edge\//)!=null;t.isIE=si;ur=!1;t.isIE9=cf;fr=!1;document.addEventListener('test',function(){},{get passive(){return fr=!0,!0}});t.getEventOptions=er;t._startDrag=lf;document.doctype&&navigator.appVersion.indexOf('MSIE 9')>-1&&(ur=!0,document.addEventListener('mousemove',function(n){var i,t;if(n.which==1&&(i=nt(n.target,'.wj-control'),i&&!i.style.cursor))for(t=n.target;t;t=t.parentNode)if(t.attributes&&t.attributes.draggable)return t.dragDrop(),!1}));or='requestAnimationFrame';cu='cancelAnimationFrame';window[or]||(hi=0,window[or]=function(n){var t=Date.now(),i=16-(t-hi),r=i>0?i:0;return hi=t+r,setTimeout(function(){n(hi)},r)},window[cu]=clearTimeout)})